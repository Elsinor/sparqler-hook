import pprint
import requests
import urllib
import json



if Hook['params'].has_key('name'):
  name = Hook['params']['name']

  q = """PREFIX dbo: <http://dbpedia.org/ontology/>
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX dbr: <http://dbpedia.org/resource/>
  PREFIX dbp: <http://dbpedia.org/property/>
  select distinct ?theatre ?comment ?abstract ?thumbnail ?architect ?since ?label
  where {
  ?theatre rdf:type dbo:Building . 
  ?theatre rdfs:label ?label .
  ?theatre rdfs:comment ?comment .
  ?theatre dbo:abstract ?abstract .
  ?theatre dbo:thumbnail ?thumbnail .
  ?theatre dbp:architect ?architect .
  ?theatre dbp:opened ?since .

  filter(str(?label)=\""""+name+"""\")
 }
 """


  params = {"query":q}
  ash = urllib.urlencode(params)

  DBpedia = "http://dbpedia.org/sparql?"+ash+"&format=json&run=+Run+Query+"

  #DBlink = DBpedia['value']


  r = requests.get(DBpedia)
  results = json.loads(r.text)
  print(results)
  
else:
  print("no label")




  
